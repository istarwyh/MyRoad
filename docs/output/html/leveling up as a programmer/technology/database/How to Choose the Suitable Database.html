<!DOCTYPE html>

<html lang="en">

        <head>
                <!-- Page information -->
                <meta charset="UTF-8" />
                <meta name="node_id" content="how to choose the suitable database">
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <link rel="shortcut icon" href="/favicon.ico" />

                <!-- Set title -->
                <title>Obsidian-Html/Notes</title>

                <!-- Includes -->
                <script src="/obs.html/static/obsidian_core.js"></script>
<script src="/obs.html/static/encoding.js"></script>
<link rel="stylesheet" href="/obs.html/static/master.css" />
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
            'securityLevel': 'loose',
            'theme': 'dark',
            'themeVariables': {
                    'darkMode': true,
            }
    });
</script>
<script>
  MathJax = {
    loader: {
      load: [
        '[tex]/action',
        'output/chtml',
        '[tex]/centernot'
      ]
    },
    tex: {
      inlineMath: [ ["\\(","\\)"] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true,
      processEnvironments: true,
      packages: {'[+]': ['centernot']}
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script src="/obs.html/static/flexsearch.bundle.js"></script>
<script src="/obs.html/static/pako.js"></script>
<script src="/obs.html/static/search.js"></script>
<script src="/obs.html/static/dirtree.js"></script>




                <!-- Onload tweaks -->
                <script>
                        const CURRENT_NODE = 'how to choose the suitable database';
                        const HTML_URL_PREFIX = '';
                        const PAGE_DEPTH = 3;
                </script>
        </head>

<body class="theme-obs-light">
        <div id="antiflash" style="display: none;"></div>
        <script>
                document.getElementById('antiflash').style.display = 'block';
        </script>
        <div id="search-master-div">
    <div id="search-slab" king_ramses="return the slaaab">
            <div id="search-controls">
                    <input id="search_string" placeholder="Type to search notes" type="text" />
                    <div class="tooltip" style="display: none;">
                        <input type="checkbox" id="hard_search" name="hard" />
                        <span class="tooltiptext">Hard search (require exact match)</span>
                    </div>
                    <div id="search-results-box">
                        <div id="search-results"></div>
                    </div>
                    <div id="search-instructions">
                        <div class="prompt-instruction mobile">
                            <button onclick="toggle_id('search-master-div');"><b>Close</b> Search </button>
                        </div>
                    </div>
            </div>
    </div>
</div>

<script>
    document.getElementById("search-master-div").addEventListener('click', e => {
            if(e.target !== e.currentTarget){
                    return
            }
            toggle_id('search-master-div');
    })
    document.getElementById("search_string").addEventListener("input", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    }); 
    document.getElementById("hard_search").addEventListener("click", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    });

    window.addEventListener('keydown', e => {
        if((e.key=='Escape'||e.key=='Esc'||e.keyCode==27)){
            toggle_id('search-master-div');
            return false;
        } 
    }, true);

    function click_list_link(element){
        element.parentElement.getElementsByTagName('a')[0].click()
    }
</script>

        <div id="page_holder" class="flex_col">
                <div id="header" class="header">
    <div id="header_flex" class="flex_row">
            <a href="/index.html" id="homelink" title="Clear screen and go to homepage">Obsidian-Html/Notes</a>
            <div id="menu_toggle_button" class="navbar-button requires_js" onclick="toggle_menu()">
                    ≡
            </div>
            <div id="navbar" class="navbar requires_js">
                    
                    <div class="icon-tray">
                            <div id="theme-button" class="theme-button requires_js" title="Change theme" onclick="toggle_theme_popup(this)">
    T
</div>
<script>
    function toggle_theme_popup(el){
        // make theme button show that it's active by adding the .active class
        toggle(el);

        // show the theme selector
        toggle_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            toggle(pu);
        }
    }

    function disable_theme_popup(){
        disable_id('theme-button');

        // show the theme selector
        disable_id('theme-popup')

        let h2 = document.getElementById('header2')
        if (h2){
            let pu = document.getElementById('header2').getElementsByClassName('popup')[0];
            disable(pu);
        }
    }
</script>
                                    <div onclick="openSearch()" class="theme-button requires_js">
            <img src = "/obs.html/static/search.svg" alt="Search notes" title="Search notes" style="margin: 4px;"/>
        </div>
        <script>
            function openSearch(){
                // toggle search popup and continue with extra code if it is enabled this time
                if (toggle_id('search-master-div')){
                    // get input field and temporarily disable it
                    let ss = document.getElementById('search_string');
                    ss.value = 'Seach data initializing...';
                    ss.readOnly = true; 

                    // load search data if not yet done so
                    setTimeout(function(){
                        LoadSearchData()

                        // clear input and put focus on it so that we can start typing immediately
                        ss.value = '';
                        ss.readOnly = false; 
                        ss.focus()
                        ss.select()
                    }, 100);
                }
            }
        </script>
                                    <div class="graph_header_div requires_js">
            <a id="graph_link" class="system-link" href="/obs.html/graph/index.html?node=how to choose the suitable database" title="Open fullpage Graph">
                    <img class="graph_header_div_svg" src = "/obs.html/static/graph.svg" alt="Open fullpage Graph" style="margin: 2px; width: 17px;"/>
            </a>
        </div>
                                    <div >
            <a id="dirtree_link" class="system-link" href="/obs.html/dir_index.html" title="View directory tree">
                    <img src = "/obs.html/static/dirtree.svg" style="width: 12px; padding: 4px;" alt="Directory tree link"/>
            </a>
        </div>
                            <div>
    <a href="/obs.html/tags/index.html" title="Open tag view">
            <img src = "/obs.html/static/hashtag.svg" alt="RSS Feed link" style="width: 24px; margin-left: -2px; margin-top: -2px;"/>
    </a>
</div>
                            
                    </div>
                    <div style="display: flex; flex-direction:column">
                        <div id="left_pane_toggle_nav" class="left_pane_toggle_nav">Toggle Directory Tree Pane</div>
                        <div id="right_pane_toggle_nav" class="right_pane_toggle_nav">Toggle Table of Contents Pane</div>
                    </div>
            </div>
    </div>
    <div class="popup" id="theme-popup">
    <label for="cars">Theme </label>

    <select name="theme" id="theme" onchange="set_theme(this.value)">
      <option value="obs-light" selected="selected">obsidian-light</option>
      <option value="obs-dark">obsidian-dark</option>
    </select> 
</div>
</div>
                <div class="flex_row">
                        <div id="left_pane" class="left_pane active">
    <div id="left_pane_fold_header" class="left_pane_fold_header fold_header">x</div>
    <div id="left_pane_content" class="left_pane_content">
            <div id="dirtree"><button id="folder-1" class="dir-button active" onclick="toggle_dir(this.id)"><div class="file-icon"></div>leveling up as a programmer</button>
<div id="folder-container-1" class="dir-container requires_js active" path="/leveling up as a programmer">
	<button id="folder-2" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>practices</button>
	<div id="folder-container-2" class="dir-container requires_js " path="/leveling up as a programmer/practices">
		<button id="folder-3" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>Git</button>
		<div id="folder-container-3" class="dir-container requires_js " path="/leveling up as a programmer/practices/Git">
			<ul class="dir-list">
				<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/practices/Git/Frequently Git Command.html"  >Frequently Git Command</a></li>
			</ul>
		</div>
		<button id="folder-4" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>data</button>
		<div id="folder-container-4" class="dir-container requires_js " path="/leveling up as a programmer/practices/data">
			<ul class="dir-list">
				<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/practices/data/Practices for processing l0 Billion Bill data.html"  >Practices for processing l0 Billion Bill data</a></li>
			</ul>
		</div>
		<ul class="dir-list">
			<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/practices/Create Once,Publish Where.html"  >Create Once,Publish Where</a></li>
			<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/practices/Frequently Used Prompt.html"  >Frequently Used Prompt</a></li>
		</ul>
	</div>
	<button id="folder-5" class="dir-button active" onclick="toggle_dir(this.id)"><div class="file-icon"></div>technology</button>
	<div id="folder-container-5" class="dir-container requires_js active" path="/leveling up as a programmer/technology">
		<button id="folder-6" class="dir-button active" onclick="toggle_dir(this.id)"><div class="file-icon"></div>database</button>
		<div id="folder-container-6" class="dir-container requires_js active" path="/leveling up as a programmer/technology/database">
			<button id="folder-7" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>HTAP</button>
			<div id="folder-container-7" class="dir-container requires_js " path="/leveling up as a programmer/technology/database/HTAP">
				<ul class="dir-list">
					<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/technology/database/HTAP/Hologres.html"  >Hologres</a></li>
				</ul>
			</div>
			<button id="folder-8" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>OLAP型数据库</button>
			<div id="folder-container-8" class="dir-container requires_js " path="/leveling up as a programmer/technology/database/OLAP型数据库">
				<button id="folder-9" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>全文索引</button>
				<div id="folder-container-9" class="dir-container requires_js " path="/leveling up as a programmer/technology/database/OLAP型数据库/全文索引">
					<ul class="dir-list">
						<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/technology/database/OLAP型数据库/全文索引/Inverted Index of Lucene and B+Tree.html"  >Inverted Index of Lucene and B+Tree</a></li>
					</ul>
				</div>
				<ul class="dir-list">
				</ul>
			</div>
			<button id="folder-10" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>relational_database</button>
			<div id="folder-container-10" class="dir-container requires_js " path="/leveling up as a programmer/technology/database/relational_database">
				<ul class="dir-list">
					<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/technology/database/relational_database/MySQL Index Introduction and Correct Use.html"  >MySQL Index Introduction and Correct Use</a></li>
					<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/technology/database/relational_database/Possible Problems with Sharding and Partitioning.html"  >Possible Problems with Sharding and Partitioning</a></li>
				</ul>
			</div>
			<button id="folder-11" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>technology</button>
			<div id="folder-container-11" class="dir-container requires_js " path="/leveling up as a programmer/technology/database/technology">
				<ul class="dir-list">
					<li><div class="file-icon"></div><a class="" href="/leveling up as a programmer/technology/database/technology/Distributed Computing.html"  >Distributed Computing</a></li>
				</ul>
			</div>
			<ul class="dir-list">
				<li><div class="file-icon"></div><a class="active current_page_dirtree" href="/leveling up as a programmer/technology/database/How to Choose the Suitable Database.html"  >How to Choose the Suitable Database</a></li>
			</ul>
		</div>
		<ul class="dir-list">
		</ul>
	</div>
	<ul class="dir-list">
	</ul>
</div>
<button id="folder-12" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>story</button>
<div id="folder-container-12" class="dir-container requires_js " path="/story">
	<ul class="dir-list">
		<li><div class="file-icon"></div><a class="" href="/story/Cloud App.html"  >Cloud App</a></li>
		<li><div class="file-icon"></div><a class="" href="/story/Consignment and other e-commerce Business Models.html"  >Consignment and other e-commerce Business Models</a></li>
		<li><div class="file-icon"></div><a class="" href="/story/Hyper CAD Markup Language.html"  >Hyper CAD Markup Language</a></li>
		<li><div class="file-icon"></div><a class="" href="/story/Project Management.html"  >Project Management</a></li>
		<li><div class="file-icon"></div><a class="" href="/story/iCareer.html"  >iCareer</a></li>
	</ul>
</div>
<ul class="dir-list">
	<li><div class="file-icon"></div><a class="" href="/Bigtable.html"  >Bigtable</a></li>
	<li><div class="file-icon"></div><a class="" href="/Binlog Master-Slave Data Synchronization.html"  >Binlog Master-Slave Data Synchronization</a></li>
	<li><div class="file-icon non-md-file"></div><a class="" href="/Classic Process Data Infrastructure.canvas"  class="external-link">Classic Process Data Infrastructure.canvas</a></li>
	<li><div class="file-icon non-md-file"></div><a class="" href="/Finance Technology Area Relation.canvas"  class="external-link">Finance Technology Area Relation.canvas</a></li>
	<li><div class="file-icon"></div><a class="" href="/Horizontal Scaling.html"  >Horizontal Scaling</a></li>
	<li><div class="file-icon"></div><a class="" href="/Information Diffusion.html"  >Information Diffusion</a></li>
	<li><div class="file-icon"></div><a class="" href="/ORC (Optimized Row Columnar).html"  >ORC (Optimized Row Columnar)</a></li>
	<li><div class="file-icon"></div><a class="" href="/OceanBase.html"  >OceanBase</a></li>
	<li><div class="file-icon"></div><a class="" href="/PageCache.html"  >PageCache</a></li>
	<li><div class="file-icon"></div><a class="" href="/Paxos.html"  >Paxos</a></li>
	<li><div class="file-icon"></div><a class="" href="/RDMA.html"  >RDMA</a></li>
	<li><div class="file-icon"></div><a class="" href="/Raft.html"  >Raft</a></li>
	<li><div class="file-icon"></div><a class="" href="/Redo-log Master-Slave Data Synchronization.html"  >Redo-log Master-Slave Data Synchronization</a></li>
	<li><div class="file-icon"></div><a class="" href="/SST(Sorted String Table).html"  >SST(Sorted String Table)</a></li>
	<li><div class="file-icon"></div><a class="" href="/Storage-Compute Architecture.html"  >Storage-Compute Architecture</a></li>
	<li><div class="file-icon"></div><a class="" href="/Write-Ahead Logging.html"  >Write-Ahead Logging</a></li>
	<li><div class="file-icon"></div><a class="" href="/index.html"  >index</a></li>
</ul>
</div>
    </div>
</div>
                        <div class="container">
                                <div class="content"><h1 id="how-to-choose-the-suitable-database">How to Choose the Suitable Database</h1>
<p>To choose the suitable database, we should focus on the key differences between them, especially the main technology of them, because I believe none of a database can obtain all the advantages. When we encounter a new project, we should ask ourselves, "How much innovation in basic technology does this project achieve, and what combination of existing technologies does it involve?"   </p>
<h2 id="ask-gpt4">Ask GPT4</h2>
<blockquote>
<p>As an expert on databases, your task is to provide a summary of ten dimensions that illustrate the differences between databases such as MySQL, PostgreSQL, Redis, ElasticSearch, MongoDB, TiDB, ClickHouse, OSS, Simple Storage Service, and others. The dimensions should include factors such as data model, infrastructure, index structure, data-sync strategy, data store strategy and other technical factors. Your summary should explain the reasons why these differences exist and how they affect the suitability of each database for different use cases. <br />
Your response should be clear and concise, highlighting the most significant differences between each database and the advantages and disadvantages of each in relation to the ten dimensions mentioned above. Your response should be flexible enough to allow for various relevant and creative reasons for the differences between databases. For example, you could explain that MySQL uses a B+ Tree data structure, which is effective for storing large amounts of data on disk, while MongoDB uses a document-based data model that is more flexible but can be less efficient for certain types of queries. For example, you at least tell people that MySQL uses B+ Tree as the major index which is a Multiway Unbalanced Binary Tree existing in the disk, and it usually uses sub-library and sub-table strategy when it stores over 2000 thousand records. <br />
Your goal is to provide a comprehensive and informative overview of the major technical differences between these databases and the reasons why these differences exist, while also encouraging creative and relevant explanations to make the summary unique and engaging.   </p>
</blockquote>
<p>MySQL, to some extent, can be considered the "C language" of the database field. As a widely used relational database, MySQL is open-source, stable, and reliable, making it a preferred choice for many applications and websites. However, with the problems encountered in using relational databases like MySQL, a large number of NoSQL and NewSQL databases have emerged to address these issues.    </p>
<p>NoSQL (Not Only SQL) is a category of non-relational distributed databases that aims to overcome the limitations of traditional relational databases in handling large-scale data processing and high concurrency scenarios. NoSQL databases emphasize scalability, high performance, and flexibility, making them suitable for applications that deal with massive and rapidly changing data patterns. Well-known NoSQL databases include MongoDB, Cassandra, and Redis.    </p>
<p>NewSQL is an emerging database concept that combines traditional relational databases with <a href="/leveling%20up%20as%20a%20programmer/technology/database/technology/Distributed%20Computing.html">Distributed Computing</a>. It aims to provide the transactional consistency and data security of traditional relational databases, while also offering the scalability and high concurrency processing capabilities of distributed databases. NewSQL databases achieve data <a href="/Horizontal%20Scaling.html">Horizontal Scaling</a> and load balancing through innovative architectures and technologies such as sharding, replication, and intelligent routing. This combination of relational and distributed computing approaches satisfies the modern application's requirements for high performance, high availability, and strong consistency. Representative examples of NewSQL databases include Spanner, CockroachDB, and TiDB.   </p>
<h2 id="new-hardware">New Hardware</h2>
<h3 id="nvme">NVMe</h3>
<p>NVMe, or Non-Volatile Memory Express, is a communication protocol designed specifically for high-speed solid-state drives (SSDs).  <br />
Compared to disk and memory, it strikes a balance between cost and random access performance.   </p>
<h3 id="rdma"><a href="/RDMA.html">RDMA</a></h3>
<h2 id="data-createpersistence-backup">Data Create、Persistence &amp; Backup</h2>
<h3 id="index-structure">Index Structure</h3>
<ul>
<li>...traditional data structure like list、array   </li>
<li>bitmap   </li>
<li>dictionary encoding   </li>
</ul>
<p>MySQL uses B+ Tree as the major index, which is a multiway unbalanced binary tree existing on disk. It is effective for storing large amounts of data on disk.   </p>
<ul>
<li>PostgreSQL also uses B+ Tree as its primary index structure, along with other index types like hash, GiST, and SP-GiST.   </li>
<li>Redis uses in-memory data structures for indexing, providing fast access to data.   </li>
<li>ElasticSearch uses an inverted index for full-text search and analytics.   </li>
<li>MongoDB uses B-Tree indexes, which are similar to B+ Tree but with some differences in node structure and traversal.   </li>
<li>TiDB uses a distributed index structure based on Google's Percolator model.   </li>
<li>ClickHouse uses a combination of primary and secondary indexes, including sparse and bitmap indexes.   </li>
</ul>
<h3 id="data-persistence-format">Data Persistence Format</h3>
<p>If a computer wants to write data from memory to disk, it typically needs to perform at least two steps:   </p>
<ol>
<li>The program writes to the <a href="/PageCache.html">PageCache</a>   </li>
<li>The <a href="/PageCache.html">PageCache</a> is flushed to the disk   </li>
</ol>
<h4 id="column">Column</h4>
<p>Examples: <a href="/ORC%20%28Optimized%20Row%20Columnar%29.html">ORC (Optimized Row Columnar)</a> <br />
Column storage is suitable for OLAP(Online Analytical Processing) scenarios:   </p>
<ul>
<li>data scanning   </li>
<li>filtering   </li>
<li>statistical analysis   </li>
</ul>
<h4 id="row">Row</h4>
<p>Row storage is suitable for OLTP(Online Transaction Processing) scenarios:   </p>
<ul>
<li>Primary Key select   </li>
<li>ACID   </li>
</ul>
<h5 id="examples">Examples:</h5>
<ul>
<li><a href="/SST%28Sorted%20String%20Table%29.html">SST(Sorted String Table)</a>   </li>
<li><a href="/leveling%20up%20as%20a%20programmer/technology/database/OLAP%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95/Inverted%20Index%20of%20Lucene%20and%20B%2BTree.html#h_2.1.-b+tree">Inverted Index of Lucene and B+Tree</a>   </li>
</ul>
<h4 id="coexistence-of-rows-and-columns">Coexistence of Rows and Columns</h4>
<p>In a traditional column storage database, data is stored by column rather than by row. This can be beneficial for analytical queries that aggregate values in a column because the database can read the column data in a continuous disk scan.   </p>
<h5 id="examples_1">Examples:</h5>
<ul>
<li><a href="/leveling%20up%20as%20a%20programmer/technology/database/HTAP/Hologres.html">Hologres</a> Coexistence of Rows and Columns Style   </li>
<li><a href="/Bigtable.html">Bigtable</a>   </li>
<li><a href="/OceanBase.html">OceanBase</a>   </li>
</ul>
<h4 id="lsm">LSM</h4>
<p>Examples: Inverted Index   </p>
<h3 id="backup-strategy">Backup Strategy</h3>
<h4 id="write-ahead-logging"><a href="/Write-Ahead%20Logging.html">Write-Ahead Logging</a></h4>
<h4 id="aof-append-only-file">AOF(Append Only File)</h4>
<p>Redis doesn't use a traditional <a href="/Write-Ahead%20Logging.html">WAL</a>, but its AOF persistence mode has similarities with the concept of <a href="/Write-Ahead%20Logging.html">Write-Ahead Logging</a>. <br />
The AOF and <a href="/Write-Ahead%20Logging.html">Write-Ahead Logging</a> share the principle of logging changes to data before they are applied, providing a way to recover the state of the data in case of a crash. The AOF can be configured to sync to disk at different frequencies based on the fsync policy. This allows you to balance between write performance and data durability.   </p>
<h4 id="rdb-redis-database"><a href="https://redis.io/docs/management/persistence/" class="external-link" class="external-link">RDB(Redis Database)</a></h4>
<h3 id="rdb-aof">RDB + AOF</h3>
<p><a href="https://redis.io/docs/management/persistence/" class="external-link" class="external-link">AOF rewrite</a>   </p>
<p>When AOF is performing a AOF rewrite, Redis first writes a data snapshot in RDB format to the AOF file, and then appends each write command generated during this period to the AOF file.   </p>
<h2 id="conventional-system-implementation-method">Conventional System Implementation Method</h2>
<h3 id="data-model">Data Model</h3>
<ul>
<li>MySQL and PostgreSQL use a relational data model with tables, rows, and columns. They support SQL queries and ACID transactions.   </li>
<li>Redis is an in-memory key-value store, supporting various data structures like strings, lists, sets, and hashes.   </li>
<li>ElasticSearch stores data in JSON documents and is designed for search and analytics.   </li>
<li>MongoDB is a document-based NoSQL database, storing data in BSON format.   </li>
<li>TiDB is a distributed NewSQL database that supports the MySQL protocol and provides horizontal scalability.   </li>
<li>ClickHouse is a columnar database designed for real-time analytics.   </li>
<li>OSS and Simple Storage Service are object storage services, storing data as objects in a flat address space.   </li>
</ul>
<h3 id="connection-model">Connection Model</h3>
<h3 id="spawning-a-new-process-on-each-connection">Spawning a New Process on Each Connection</h3>
<p>The process model provides better isolation, for example, an invalid memory access error can only crash a single process, rather than the entire database server. The process model, on the other hand, consumes more resources like memory.   </p>
<h4 id="example">Example</h4>
<ul>
<li>PostgreSQL   </li>
</ul>
<h3 id="spawns-a-new-thread-on-each-connection">Spawns a New Thread on Each Connection</h3>
<ul>
<li>MySQL   </li>
</ul>
<h3 id="concurrency-control">Concurrency Control</h3>
<ul>
<li>MySQL and PostgreSQL use multi-version concurrency control (MVCC) to handle concurrent transactions.   </li>
<li>Redis uses single-threaded execution, processing one command at a time.   </li>
<li>Elasticsearch, MongoDB, and TiDB support optimistic concurrency control.   </li>
<li>ClickHouse uses a lock-free data structure for concurrent query execution.   </li>
</ul>
<h2 id="database-solutions-for-distributed-systems">Database Solutions for Distributed Systems</h2>
<h3 id="database-sharding">Database Sharding</h3>
<p><img alt="" src="https://xiaohui-zhangjiakou.oss-cn-zhangjiakou.aliyuncs.com/image/202309171515581.png" /> <br />
<img alt="" src="https://xiaohui-zhangjiakou.oss-cn-zhangjiakou.aliyuncs.com/image/202309171517508.png" />   </p>
<h3 id="consensus-algorithm">Consensus Algorithm</h3>
<h4 id="paxos"><a href="/Paxos.html">Paxos</a></h4>
<h4 id="raft"><a href="/Raft.html">Raft</a></h4>
<h3 id="data-synchronization">Data Synchronization</h3>
<h4 id="binlog-master-slave-data-synchronization"><a href="/Binlog%20Master-Slave%20Data%20Synchronization.html">Binlog Master-Slave Data Synchronization</a></h4>
<ul>
<li>TiDB uses the Raft consensus algorithm for data synchronization across its distributed nodes.   </li>
</ul>
<h5 id="asynchronous">Asynchronous</h5>
<ul>
<li>Redis master-slave replication   </li>
<li>ElasticSearch primary-backup model   </li>
</ul>
<h5 id="synchronous">Synchronous</h5>
<p>Synchronous replication is a most reliable way comparing with other replication strategy, because the master node MUST WAIT for the slave node to confirm before sending data. Naturally, it can have a significant impact on the performance of the master node because it needs to wait for the slave node to confirm before continuing to process client requests.   </p>
<h5 id="semi-synchronous">Semi-synchronous</h5>
<ul>
<li>MySQL master-slave replication   </li>
</ul>
<h4 id="redo-log-master-slave-data-synchronization"><a href="/Redo-log%20Master-Slave%20Data%20Synchronization.html">Redo-log Master-Slave Data Synchronization</a></h4>
<h3 id="storage-compute-architecture"><a href="/Storage-Compute%20Architecture.html">Storage-Compute Architecture</a></h3>
<p>In traditional database deployment, the master and slave each maintain an independent copy of the data and synchronize through Binlog. In a shared storage cloud database, the master and slave share a copy of the data.   </p>
<h2 id="license">License</h2>
<ul>
<li>MySQL Community Edition is licensed under the GPL.   </li>
<li>Postgres is released under the PostgreSQL license, a free and open source license similar to BSD or MIT.   </li>
</ul>
<h2 id="ecosystem-ecological-ecosystem"><strong>Ecosystem Ecological Ecosystem</strong></h2>
<h2 id="features-of-common-database">Features of Common Database</h2>
<h3 id="cost">Cost</h3>
<h3 id="performance"><strong>Performance</strong></h3>
<h3 id="query-optimizer">Query Optimizer</h3>
<h3 id="data-consistency">Data Consistency</h3>
<ul>
<li>MySQL, PostgreSQL, and TiDB provide strong consistency through ACID transactions.   </li>
<li>Redis offers tunable consistency levels, depending on the configuration.   </li>
<li>Elasticsearch and MongoDB provide eventual consistency.   </li>
<li>ClickHouse focuses on read consistency for analytical queries.   </li>
<li>OSS and Simple Storage Service provide eventual consistency for object storage.   </li>
</ul>
<h3 id="usability"><strong>Usability</strong></h3>
<h4 id="support-for-global-indexes">Support for Global Indexes</h4>
<p>Local indexes are friendly to transaction performance and are all local transactions. However, they have the disadvantage of <a href="/leveling%20up%20as%20a%20programmer/technology/database/relational_database/Possible%20Problems%20with%20Sharding%20and%20Partitioning.html#h_4.-读扩散：查询没有分库分表键拖慢查询"> read amplification</a>.  <br />
Global indexes avoid read amplification, but they convert all transactions into <a href="/leveling%20up%20as%20a%20programmer/technology/database/relational_database/Possible%20Problems%20with%20Sharding%20and%20Partitioning.html#h_3.-分布式事务">distributed transactions</a>, greatly increasing transaction complexity and slowing down the performance of individual transactions.   </p>
<h4 id="query-language">Query Language</h4>
<ul>
<li>MySQL and PostgreSQL use <code>SQL</code> as their query language.   </li>
<li>Redis has its own <code>set of commands</code> for data manipulation.   </li>
<li>Elasticsearch uses a JSON-based query language called <code>Query DSL</code>.   </li>
<li>MongoDB uses a <code>JSON-like query language</code>.   </li>
<li>TiDB supports <code>SQL</code> and is compatible with the MySQL protocol.   </li>
<li>ClickHouse uses <code>SQL</code> with extensions for analytical functions.   </li>
</ul>
<h4 id="json-support">JSON Support</h4>
<p>Both Postgres and MySQL supports JSON column. Postgres supports more features, like allowing indexes to be created on JSON fields.   </p>
<h3 id="cte-common-table-expression"><strong>CTE (Common Table Expression)</strong></h3>
<p>Postgres has more comprehensive support for CTE:   </p>
<ul>
<li>SELECT, UPDATE, INSERT, DELETE operations within the CTE   </li>
<li>SELECT, UPDATE, INSERT, DELETE operations after CTE   </li>
</ul>
<h3 id="advanced-function-or-user-defined-function-support">Advanced Function or User Defined Function Support</h3>
<h3 id="operability"><strong>Operability</strong></h3>
<h3 id="extensibility">Extensibility</h3>
<p>Postgres supports several extensions. The most outstanding is PostGIS, which brings geospatial capabilities to Postgres. In addition, there is Foreign Data Wrapper (FDW), which supports querying other data systems, pg_stat_statements for tracking planning and execution statistics, and pgvector for vector searches for AI applications.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>   </p>
<h3 id="security">Security</h3>
<h2 id="use-cases">Use Cases</h2>
<ul>
<li>MySQL and PostgreSQL are suitable for traditional transactional applications, such as web applications and e-commerce platforms.   </li>
<li>Redis is ideal for caching, session management, and real-time analytics.   </li>
<li>Elasticsearch is best for search and log analytics use cases.   </li>
<li>MongoDB is suitable for large-scale, schema-less applications, such as content management systems and IoT platforms.   </li>
<li>TiDB is suitable for hybrid transactional and analytical processing (HTAP) workloads.   </li>
<li>ClickHouse is ideal for real-time analytics and reporting.   </li>
<li>OSS and Simple Storage Service are suitable for storing large amounts of unstructured data, such as images, videos, and backups.   </li>
</ul>
<h3 id="other-case">Other case</h3>
<ol>
<li><a href="https://mp.weixin.qq.com/s/MrXitmIGnlsWY25aw1SRqw" class="external-link">一名开发者眼中的 TiDB 与 MySQL 的选择丨TiDB Community</a>   </li>
<li><a href="https://mp.weixin.qq.com/s/2oKTItUgvsbEHItiWiGtzA" class="external-link">数据库选型：MySQL、PolarDB、PolarDB-X、TableStore、MongoDB、TiDB、ClickHouse:</a>   </li>
</ol>
<h2 id="references">References</h2>
<p><a href="https://aws.amazon.com/cn/startups/start-building/how-to-choose-a-database/" class="external-link">https://aws.amazon.com/cn/startups/start-building/how-to-choose-a-database/</a>   </p>
<p><a href="https://waverleysoftware.com/blog/how-to-choose-the-right-database/" class="external-link">https://waverleysoftware.com/blog/how-to-choose-the-right-database/</a>   </p>
<p>:<sup id="fnref2:1"><a class="footnote-ref" href="#fn:1">1</a></sup><a href="https://mp.weixin.qq.com/s/xf7qb4oAVHyi4_U32FSKPA" class="external-link">全方位对比 Postgres 和 MySQL (2023 版) </a></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1"></li>
</ol>
</div></div>
<div class="note-footer">
<div class="backlinks">
<h2>Backlinks</h2>
<ul>
	<li><a class="backlink" href="/index.html">index</a></li>
</ul>
</div>

<div class="tags">

</div>

</div>
<div class="graph requires_js ">
    <div id="A89459892663477579990484259198448492218{level}" class="graph_div"></div>

    <div class="graph-instructions" id="D89459892663477579990484259198448492218{level}">
        Left-click: follow link, Right-click: select node, Scroll: zoom
    </div>
    
    <div class="graph-button-row" style="display:flex;">
        <button class="graph_button graph_show_button" id="B89459892663477579990484259198448492218{level}" level="{level}" note_temp_id="89459892663477579990484259198448492218" onclick="window.ObsHtmlGraph.run(this, '89459892663477579990484259198448492218', 'how to choose the suitable database');">
            Show Graph
        </button>
        <button class="graph_button graph_type_button" id="C89459892663477579990484259198448492218{level}" style="flex:1" onclick="window.ObsHtmlGraph.switch_graph_type(this);">
            2D
        </button>
    </div>
</div>

<script type="module">
    if (window.ObsHtmlGraph == undefined){
        import('/obs.html/static/graph.js').then((Module) => {
            window.ObsHtmlGraph = Module;
            window.ObsHtmlGraph.arm_page(document.getElementById('page_holder'))
        })
    }
</script>




                                <!-- end content -->
                        </div>
                        <div class="container_filler">
                        </div>
                        <div id="right_pane" class="right_pane active">
    <div id="right_pane_fold_header" class="right_pane_fold_header fold_header">x</div>
    <div id="right_pane_content" class="right_pane_content">
            
    </div>
</div>
                </div>
        </div>

        <script>
                function handle_toggle_side_bar(e){
                        let header;
                        let pane; 
                        let target = e.target

                        // switch out the navbar button click for a header click
                        if (target.id == 'left_pane_toggle_nav'){
                                target = document.getElementById('left_pane_fold_header')
                        }
                        else if (target.id == 'right_pane_toggle_nav'){
                                target = document.getElementById('right_pane_fold_header')
                        }

                        // get header and pane
                        if (target.classList.contains('fold_header')) {
                                header = target;
                                pane = target.parentElement;
                        }
                        else {
                                pane = target;
                                header = target.getElementsByClassName('fold_header')[0];
                        }
                        toggle_side_bar(pane, header, true)
                        e.stopPropagation();
                }
                function handle_toggle_side_bar_button(e){
                        document.getElementById('menu_toggle_button').click()
                        handle_toggle_side_bar(e);
                }

                function toggle_side_bar(pane, header, save) {
                        let active = (pane.classList.contains('active'))
                        if (active){
                                disable_side_bar(pane, header, save);
                        }
                        else {
                                enable_side_bar(pane, header, save);
                        }
                }
                function enable_side_bar(pane, header, save){
                        pane.classList.add('active');
                        pane.removeEventListener('click', handle_toggle_side_bar);
                        header.addEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, true) }
                }
                function disable_side_bar(pane, header, save){
                        pane.classList.remove('active');
                        pane.addEventListener('click', handle_toggle_side_bar);
                        header.removeEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, false) }
                }
                function set_correct_header_symbol(header){
                        let pane = header.parentElement;
                        let symbol = [['>', '<'],['<', '>']]
                        symbol = symbol[Number(header.classList.contains('right_pane_fold_header'))][Number(pane.classList.contains('active'))];
                        console.log(symbol);
                        header.innerHTML = symbol
                        return header;
                }
                function panel_folding_get_panel_name(header){
                        return ['left', 'right'][Number(header.classList.contains('right_pane_fold_header'))]
                }
                function save_panel_folding_state(header, active){
                        ls_set('pane_folding_state_'+panel_folding_get_panel_name(header), Number(active));
                }
                function load_panel_folding_state(panel_name){
                        val = ls_get('pane_folding_state_'+panel_name)
                        if (!val){ return {'exists': false, 'value': null}}
                        return {'exists': true, 'value': Boolean(Number(val))}
                }
                function set_pane_folding_start(left_header, right_header){
                        // small screen = closed
                        let right_pane_enabled = true;
                        let left_pane_enabled = true;
                        let w = window.visualViewport.width
                        if (w < 1000){
                                left_pane_enabled = false
                        }
                        if (w < 800){
                                right_pane_enabled = false
                        }

                        // get saved values if present
                        let rval = load_panel_folding_state('right')
                        if (rval['exists']){
                                right_pane_enabled = rval['value']
                        }
                        let lval = load_panel_folding_state('left')
                        if (lval['exists']){
                                left_pane_enabled = lval['value']
                        }

                        // default = enabled, so we only need to disable
                        if (!left_pane_enabled){
                                disable_side_bar(document.getElementById('left_pane'), document.getElementById('left_pane_fold_header'))
                        }
                        if (!right_pane_enabled){
                                disable_side_bar(document.getElementById('right_pane'), document.getElementById('right_pane_fold_header'))
                        }
                }

                function init_pane_folding(header){
                        set_correct_header_symbol(header);
                        header.addEventListener('click', handle_toggle_side_bar);
                }
                
                
                set_pane_folding_start()
                init_pane_folding(document.getElementById('left_pane_fold_header'));
                init_pane_folding(document.getElementById('right_pane_fold_header'));

                document.getElementById('left_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
                document.getElementById('right_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
        </script>

        <script src="/obs.html/static/load_dirtree_footer.js" type="text/javascript"></script>

        




</body>
</html>
