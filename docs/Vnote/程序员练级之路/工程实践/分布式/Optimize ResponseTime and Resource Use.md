## 1. 总原则
- 能批量就不要循环
- 能让数据库算就不要内存算
    - 比如同等数量下的JOIN操作
    - 能利用数据库的任务就不要代码里面配任务
- 能只要N就不要N+1
- 能离线先算就不要在线算
- 能保证并发没问题的就并发
    - 能充分利用CPU等计算机资源的就不要过分利用

## 2. 线程池
- [Java线程池实现原理及其在美团业务中的实践](https://tech.meituan.com/2020/04/02/java-pooling-pratice-in-meituan.html)
    - 线程数
    - 上下文切换成本
- [hippo4j](https://hippo4j.cn/docs/user_docs/user_guide/frame)

## 3. 杂项

### 3.1. 开发查表
开发查询数据库始终有3种选择
一是大宽表，好处是可以充分利用离线计算，应用代码少，查的时候一般效率更高；坏处是笛卡尔积带来大量计算资源，存储资源消耗，表的构建时间也更长，同时宽表数据一致性不容易维护。
另一种是按照范式拆开各表，好处是结构清晰，单表不大；坏处是代码多，要反复和数据库连接查。
最后一种是也拆开表，但是统一用sql在数据库里面操作，避免网络开销，也充分利用数据库的缓存。
实践中可以适量冗余字段，并且尽可能利用数据库的计算能力

### 3.2. 业务逻辑放哪里
业务逻辑写在哪里呢？写在Converter中，写在Service层，写在DAO层，写在SQL里其实都可以，只能说开发人员要把握好各层的边界，尽可能写在Service中内聚业务逻辑。