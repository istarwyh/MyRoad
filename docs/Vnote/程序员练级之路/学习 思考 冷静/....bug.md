# 1. 复仇者联盟-bug
## 1.1. 看到bug
### 1.1.1. 这个bug是什么类型的？
### 1.1.2. 抓住特例钻牛角尖
我似乎比较容易找茬,钻牛角尖看那个算法本身对不对.但其实一个程序只要满足一个普通的例子,就应该已经满足主要的基本逻辑.如果你觉得这个算法对某个例子所代表的情况可能不成立,请给出这种例子的**实例**,然后再分析.
## 1.2. 什么错误一个个看
- `jstat`查看JVM日志
- `jinfo` 查看JVM配置信息
### 1.2.1. CPU飙高

```wsh
1. top oder by with P:1040 // 首先按进程负载排序找到 axLoad(pid)
2. top -Hp 进程PID:1073 //找到相关负载线程PID
3. printf "0x%x\n" 线程PID：0x431 // 将线程PID转换为16进制，为后面查找jstack做准备
4. jstack 进程PID | vim +/16进制线程PID - //例如：jstack 1040 | vim +/0x431 -
```

结合Arthas分析CPU性能:`profiler start -d 30 -f /tmp/arthas/result.txt`
### 1.2.2. GC频繁
- GC日志
    - -XX:+PrintGCDetails
    - -XX:+PrintGCTimeStamps
    - -XXloggc:gclog

### 1.2.3. 任务队列积压
### 1.2.4. 线程池任务拒绝
阻塞队列中等待线程已满，并且线程池已达到最大线程数

### 1.2.5. OutOfMemoryError
#### 1.2.5.1. 堆溢出
`jmap` dump 下来**堆转储快照**。
使用`MAT`等工具分析GC Roots的引用链,找到使用对象是通过怎样的引用路径、与哪些GC Roots相关联,最后导致了垃圾收集器无法回收。
**注意**
可能单体应用过大，快照10+G；并且分析快照也十分耗时，一般在不工作的机器上分析。
##### 1.2.5.1.1. 内存泄漏
- 如果`ThreadLocal`引用被类持有或者在线程池中被使用（内存常驻），而最后没有使用`remove()`清理之前ThreadLocal持有的对象，弱引用的机制就不会被触发，从而造成内存泄漏
    - 弱引用：Minor JC/Young GC时被回收的非必须对象
- Set或Map内持有大量非必须对象的引用，比如一个时间窗口内的measurements（时间戳，性能日志等）过多
##### 1.2.5.1.2. 内存溢出
- 方法区/运行时常量池溢出：比如使用`CGlib`或`ByteBuddy`这种在运行时生成了大量增强后的类
#### 1.2.5.2. 栈溢出
##### 1.2.5.2.1. 本机内存（Direct Memory）直接溢出
- Java New IO的使用
- Java Navtive Interface的使用
##### 1.2.5.2.2. 连接泄漏
- Socket缓冲区持有Socket连接过多
- 数据库连接池连接过多（空闲线程占用）
### 1.2.6. 线程问题
线程栈在现代的64位虚拟机上也有1024KB,而除了RAM资源，往往还会持有文件句柄和数据库连接等优先资源。

- `jstack`生成线程快照
#### 1.2.6.1. 线程长时间停顿
- 死循环
- 请求外部资源导致线程被长时间挂起
#### 1.2.6.2. StackOverflowError
- 递归函数使得栈深度超过最大的允许深度
- 死循环
#### 1.2.6.3. 线程死锁
`jvm pid`等工具分析出：
Double `java.lang.Thread.State: Blocked`
## 1.3. 瞎运行别人的代码,浪费时间
至少有一点,我之前忘记`.gitingore`的内容了.暂时还没搜到怎么完全补完这些组件...首先,`npm install`
## 1.4. Bug示例
### 1.4.1. 正则匹配
#### 1.4.1.1. 对于方法的了解---document.write()
**先自己跑一遍**
**确认代码无误**
但还是有问题,So?
    - 尝试1
 是不是`let`替换了`var`的缘故?-->结果未变,并不是
    - 尝试2
是不是英文替换了中文的缘故?-->结果未变,并不是
    - 尝试3
是不是得在那个环境下才可以?-->结果你发现是你把`str3`少到了一个`3`,自然无法匹配-->改好后结果正常了
**所以你一开始真的确认代码无误了吗?**
**但其实你又发现了**
`.`的匹配不应该是匹配`除换行符（\n、\r）之外的任何单个字符`吗?这样不是应该把`</span>`前面的都给匹配出来吗?
    - Try 4
把`.`换成`[\s\S]`会怎么样-->没有效果
    - Try5
那么可能是`+`的问题?你又翻看了定义,`匹配前面的子表达式一次或多次`.觉得不会是这个问题,但你还是改一下成`*`-->![](https://gitee.com/istarwyh/images/raw/master/1618155656_20191215101234089_18272.png =94x),你发现多了个`,`号,这个是啥?-->**你猜**这个是document自己加的,其后面为空,代表0次出现.**但是因为和主问题无关,所以先不管了**
**那么似乎已经尝试完了,你不能理解**
这个时候你去问人是恰当的,然后别人告诉你去console自己调试一下,于是你发现:![](https://gitee.com/istarwyh/images/raw/master/1618155658_20191215101725942_10223.png =268x),哈???
那为什么页面上显示的不一样?**你猜**可能是`document.write()`方法会忽略某些输出.
**于是你搜索了一下**
发现有js中有三种输出方式,于是你都试了一下,发现只有`document.write()`这个在页面上显示的不完整.于是你继续搜索document.write()的使用方法,你发现![](https://gitee.com/istarwyh/images/raw/master/1618155659_20191215103044402_21130.png =265x),果然像`<p>`这种标签式的,document.write()是不会打印给html页面的.
**所以这个问题才算基本解决了**
### 1.4.2. P-mission小程序后端
#### 1.4.2.1. 删掉数据后发现无法加载出页面了
- Try1
猜想可能是改掉的序号乱了它的遍历-->把序号`id`改成连续的1/2/3,同时发现了标签没有闭合(不知道为啥vscode不提示了)-->改好后没有作用
- Try2
发现还有`publish_user_id`,以及`cover`这个标签中还有个`id`,于是都改成一样的-->可以显示一部分,点进去的页面显示非法参数
- Try3
猜想可能是`publish_user_id`,改回去-->显示不出来了
- Try4
全部改成1/2/3-->原本的一部分也显示不出来了
- Try5
于是全部回退,拿到原本的静态数据-->可以并且删掉一部分-->可以-->于是再改一下格式-->可以-->再加一个改完格式的,也可以,当时只能显示部分-->删掉两个改了格式的-->可以了
**结论**:这个不支持改格式,尽管不知道为什么
- Try6
改掉一个`id`与`publish_user_id`-->不行-->把一个干掉再试---->可以
**结论**:前面一个`id`是给进入的页面的参数;后面对于返回页面的查询(`https://ganzhiqiang.wang/ares/goods/detail/?goods_id=50`)也证实了这一点
#### 1.4.2.2. 试验数据库不返回对应值
- Try 1
删掉一些字段-->可以
#### 1.4.2.3. 数据库表创建总提示语法不对
- Try 1
上网搜-->没用但是发现了后面多打了一个`,`号,改了-->报了另一个错误---->发现本质还是打了`,`或`;`什么的
#### 1.4.2.4. 不知道该怎么返回对应格式的数据
- Try1
看后端代码并在后端代码里面搜,关键词`select`-->发现sql有关的语句并不在`Dao层`中,而是在`.xml`文件中,并且他似乎用了Mybatis的手段
于是我想到直接改他的数据库,如果能跑起来应该也就没有问题了-->不过后端似乎用了docker和tomcat,他会显示拒绝访问
- Try2
因为这个项目前后端分离通过接口连接的方式,后端只要能把对应的页面跑出来就好.所以还是回到原疑惑,我怎么返回对应格式的数据?
几个选择:
1. 继续研究怎么返回对应格式
2. 转向学习怎么返回页面,然后自己写sql尽量返回对应格式,如果返回不了就改前端
3. 把所有页面都改成静态的,不过这个也似乎不好解决对应返回页面的问题

选2吧,2自己还有点主动设计,不完全逆向;1是逆向学习,不确定性太大;3的话只能是下下策.
**不得不说**
赵泽龙直接说猜大概像`json`这样的肯定已经有人写了包了
還有就是像`@getter``@Setter`這些也的確應當是有人寫了包
#### 1.4.2.5. 報"無法訪問"
問題找了一圈是**OneDrive同步的時候鎖定**了,但是似乎同步時間還很長?-->考慮要不要換
#### 1.4.2.6. 函數空指針異常
原因居然是注釋掉了`@AutoWired`...因爲上面原本有紅點點,我就把它注釋掉了
2020年6月27日
这是因为没有把对应的属性作为`Bean`自动注入,也就没有实例化,等同于没有
```
private final Properties bean
private constructor(Bean bean){  
    this.bean = bean;
}
```
#### 1.4.2.7. 返回的页面无法达到同样效果
最开始自然是怀疑返回的不对,然后改前端逻辑,都失败了于是决定完全返回对应页面,依然不对....
只好怀疑是超出认知之外的问题,于是改掉url返回完全一样的页面,并考虑**排版**的问题,终于发现:
**即使** 是html页面中有注释的东西或者多些根本不显示的标签,都无法成功达到效果!!!
**原因**
大概是因为返回的东西要求是ResPonseBody,会被某些功能类格式化

最后发现我原本以为返回的和它原本的

- 第一版
```json
{
"message":"success","status":1,
"data":
    {
    "goods":
        [
            {
            "id":50,"publish_user_id":57,"title":"卫龙 八成新","describe":"","publish_address":"北京 大兴","price":2.0,"publish_date":"2019-12-19","look_count":55,
            "cover":
                {"id":50,"image_id":76,"path":""},
            "comment_count":5
            }
        ],
    "user_vo":
        [
            {
            "telephone":"15955311246","school":"软微学院","publish_count":2,"look_count":33,
            "user_base":
                {"id":50,"nickname":"Mbin","gender":1,"avatar":"","address":"北京 大兴"}
            }
        ]
    }
}
```
- 第二版
```json
{
"message":"success","status":1,
"data":
    [
        {
        "id":50,"publish_user_id":57,"title":"卫龙 八成新","describe":"","publish_address":"北京 大兴","price":2.0,"publish_date":"2019-12-19","look_count":55,

        "cover":{"id":50,"image_id":76,"path":""},

        "comment_count":5,
        "user_vo":
               {
                "telephone":"15955311246","school":"软微学院","publish_count":2,"look_count":33,
                "user_base":{"id":50,"nickname":"Mbin","gender":1,"avatar":"","address":"北京 大兴"}
                }
        }
    ]
}
```
- **原本的:**
```json
{
"status":1,"message":"success",
"data":
    {
    "id":50,
    "user_vo":
        {
        "user_base":{"id":57,"nickname":"高华峰","gender":1,"avatar":"","address":"Anhui Bozhou"},
        "telephone":null,"school":1,"publish_count":0,"look_count":83
        },
    "title":"卫龙 八成新","descible":" ",
    "photos":
       [
        {"id":76,"path":""}
       ],
    "price":2.0,"publish_address":"安徽 芜湖","publish_date":"2018年4月11日 22:29","look_count":153,"comment_count":2
    }
}
```
**早一点了解啊...模仿也是基于知识的**
[JSON 语法规则](https://www.runoob.com/json/json-syntax.html)
- 数据在名称/值对中
- 数据由`,`分隔
- 大括号`{}`保存对象,对象可以包含多个 key/value（键/值）对,JSON 对象中可以包含另外一个 JSON 对象
- 中括号`[]`保存数组
这样明白了之后甚至可以先用[json在线解析](https://c.runoob.com/front-end/53)看清结构啊!(包括还有看`json`的插件)
#### 1.4.2.8. 构造函数内部不能那个啥?
```java
List<Cover> photos = new ArrayList<>();photos.add(new Cover(id, image_id, path));
    photos.add(cover);
```
事实上,我试了一下,好像这样都不行(price就是从数据库拿出来的值)
```java
this.price = 100000+price;
```
只有在底下添加`get方法`,修改的约定才会生效
但即使是这样依然达不到效果
```java
public  List<Cover> addPlus(){
        List<Cover> photos = new ArrayList<>();photos.add(cover);
        return photos;
}
public  List<Cover> getPhotos(){
        return this.addPlus();}
```

**最后的解决办法**

```java
this.cover = new Cover(id,image_id,path);
this.photos=new ArrayList<>();photos.add(this.cover);
//调用它自己就好了!初始化也是调用自己
```
#### 1.4.2.9. 报avatar格式异常
找了很久还是别人发现的,我删掉了一些传入的值,导致了这些值之间对不上,但是我一直以为自己已经改回来了,而拒绝看是不是没有对上!!!!
多少bug是自己给自己下绊子呵!!!!
#### 1.4.2.10. `describe`始终无法显示
这个是...我单词拼错了,自己原本写成了`descrble`???!!!
呵......望君珍重
### 1.4.3. Bitcron啥啥
`Traceback (most recent call last):  File "D:\Python\Scripts\bitcron-script.py", line 11, in <module>
    load_entry_point('bitcron==0.0.9', 'console_scripts', 'bitcron')()`
上面这个Google了好像没得啥办法...

### 1.4.4. Hadoop云盘
#### 1.4.4.1. JAVA_HOME is not defined correctly.
**输入**
`ant -version`
**返回**
```bash
Error: JAVA_HOME is not defined correctly.
  We cannot execute /usr/lib/jvm/jdk1.7.0-71/bin/java
```
**背景**:
`java -version`可以识别

**解决思路**
[有人说](https://community.oracle.com/thread/1318002)权限问题
有人说jre子目录混淆`bin`
[有人说](https://askubuntu.com/questions/157229/java-home-is-not-defined-correctly)名字格式可能不对,用`ls -al`检查
有人是因为JAVA_HOME多加了一个`bin`
最后有人说使用`find . -exec grep -l "jdk1.7.0_71" {} \`找到真正定义你JAVA_HOME的文件,我才发现自己`JAVA_HOME`中的路径曾经因为疑惑是不是不认`_`而将其改为了`-`.

#### 1.4.4.2. 同一台linux的shell
**输入**
`java -version`
**返回**
![](https://gitee.com/istarwyh/images/raw/master/1618155659_20200521104334775_32117.png)
#### 1.4.4.3. 提示输出目录不存在
编译`/mnt/hgfs/share/Compressed/hadoop2x-eclipse-plugin-maste`时,最开始没用目录可以创建,现在不行了,为什么?
```
/mnt/hgfs/share/Compressed/hadoop2x-eclipse-plugin-master/src/contrib/eclipse-plugin/build.xml:76: destination directory "/mnt/hgfs/share/Compressed/hadoop2x-eclipse-plugin-master/build/contrib/eclipse-plugin/classes" does not exist or is not a directory

```
因为担心某些配置可能写到了其他的文件,重置了目录,只是更换了`build.xml`和`libraries.properties`.但是仍然不行.
所以是ant的记忆?**NO**

终于发现是因为最开始为了不等待将初始化和某个未知的等待操作` <target name="compile" depends="init, ivy-retrieve-common" unless="skip.contrib">`中的`depends="init, ivy-retrieve-common"`删除了,而**这个看似无意义的操作**,帮助生成了`build`的目录.

**反思**
设计者最开始或许只考虑到开发2.6.0的hadoop,并为此设置了`ini`默认`2.6.0`的hadoop,但是在后来的人借用这个开源工具编译生成其他版本插件的时候,删掉`ini`其实也破坏了原本的目录生成逻辑,从而ant编译时会提示缺少目录.

#### 1.4.4.4. 反复连接然后错误
因为端口输成了`50020`与`50040`这样
![](https://gitee.com/istarwyh/images/raw/master/1618155659_20200522093637364_2606.png)

#### 1.4.4.5. java.lang.NullPointerException
**点击**
`java build path`
**解决**
更换了IDE
#### 1.4.4.6. An internal error occurred during: "Map/Reduce location status updater
### 1.4.5. python安装
#### 1.4.5.1. `ERROR: scipy-1.4.1-cp39-cp39-win_amd64.whl is not a supported wheel on this platform.`
版本不对，可能是因为少了一个`m`

- `amd64`:win32x86_64架构
- `win32`:win32基本
- `pp`:只适用`pypy`
- `cp`：只适用`Cpython`
### 1.4.6. Socket编程
#### 1.4.6.1. 1+1!=2的bug
![](https://gitee.com/istarwyh/images/raw/master/1618155660_20200607164005000_6306.png)
**原因**
是因为"EOF"背后的编码格式不一样,导致他们占用的内存大小不一样,一个是3字节,一个是6字节.  
### 1.4.7. writingHelper/WritingCat
#### 1.4.7.1. npm  --unsafe-perm
npm does not support running with 'root' user priviledges  due to safety concerns.
#### 1.4.7.2. eclipse项目编译不通过
##### 1.4.7.2.1. 基本事实
1. eclipse有workspace的概念,所有代码修改只会作用于workspace中的源代码副本
2. `./mvnw clean verify`就是调用脚本而已,而脚本只是为了保证maven版本与作者一致,但是作者又没有加核查版本是否一致的步骤,因此一定会重新下载maven,并使用`/user/.m2/repository`
3.  `mvn clean verify`用的就是自己maven,和用脚本没有区别
4. `tests module`占据项目绝大部分编译时间
5. `tests`中涉及检查依赖是否加载的部分可能因为莫名原因(当时某个jar包被加锁了<svg t="1613551927172" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1221" width="20" height="20"><path d="M665.6 374.4c-12.8-57.6-57.6-105.6-118.4-118.4-67.2-16-131.2 9.6-169.6 64-28.8 41.6 0 60.8 16 73.6 6.4 3.2 12.8 9.6 22.4 19.2 12.8 12.8 32 9.6 44.8-3.2 12.8-12.8 9.6-32-3.2-44.8-9.6-6.4-16-12.8-22.4-19.2 22.4-25.6 60.8-38.4 96-28.8 35.2 9.6 60.8 35.2 70.4 70.4 9.6 48-12.8 92.8-54.4 112-41.6 19.2-70.4 57.6-70.4 102.4l0 22.4c0 19.2 12.8 32 32 32 0 0 0 0 0 0 16 0 32-12.8 32-32l0-22.4c0-19.2 12.8-38.4 32-44.8C643.2 528 681.6 451.2 665.6 374.4zM480 729.6c-9.6 9.6-12.8 22.4-12.8 35.2 0 12.8 6.4 25.6 12.8 35.2 9.6 9.6 22.4 12.8 35.2 12.8 12.8 0 25.6-6.4 35.2-12.8 9.6-9.6 12.8-22.4 12.8-35.2 0-12.8-6.4-25.6-12.8-35.2C531.2 710.4 499.2 710.4 480 729.6zM512 67.2c-80 0-160 22.4-227.2 64C246.4 86.4 188.8 64 124.8 64 115.2 64 102.4 70.4 96 80c-6.4 9.6-6.4 22.4 0 32 0 0 32 54.4 41.6 137.6 3.2 16 16 28.8 32 28.8 0 0 3.2 0 3.2 0C192 275.2 204.8 262.4 204.8 243.2 198.4 201.6 188.8 163.2 179.2 137.6 204.8 144 230.4 160 249.6 188.8c0 0 0 0 0 0 0 0 0 0 0 0C252.8 192 252.8 192 252.8 195.2c0 0 3.2 3.2 3.2 3.2 3.2 0 3.2 3.2 6.4 3.2 3.2 0 3.2 3.2 6.4 3.2 3.2 0 3.2 0 6.4 0 3.2 0 3.2 0 6.4 0 3.2 0 3.2 0 6.4-3.2 3.2 0 3.2 0 6.4-3.2 0 0 0 0 0 0 0 0 0 0 0 0 64-44.8 140.8-67.2 217.6-67.2 211.2 0 384 172.8 384 384s-172.8 384-384 384-384-172.8-384-384c0-54.4 9.6-105.6 32-156.8 6.4-16 0-35.2-16-41.6-16-6.4-35.2 0-41.6 16C76.8 390.4 64 451.2 64 515.2c0 246.4 201.6 448 448 448 246.4 0 448-201.6 448-448C960 268.8 758.4 67.2 512 67.2z" p-id="1222" fill="#1296db"></path></svg>)失败而导致项目测试不通过
6. 在考虑全局变量以及方法调用的情况下注释掉对应测试代码,就可以通过测试了
7. eclipse对于`lsp4j`这种依赖,可以只用plugin而不用depedencies<svg t="1613551927172" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1221" width="20" height="20"><path d="M665.6 374.4c-12.8-57.6-57.6-105.6-118.4-118.4-67.2-16-131.2 9.6-169.6 64-28.8 41.6 0 60.8 16 73.6 6.4 3.2 12.8 9.6 22.4 19.2 12.8 12.8 32 9.6 44.8-3.2 12.8-12.8 9.6-32-3.2-44.8-9.6-6.4-16-12.8-22.4-19.2 22.4-25.6 60.8-38.4 96-28.8 35.2 9.6 60.8 35.2 70.4 70.4 9.6 48-12.8 92.8-54.4 112-41.6 19.2-70.4 57.6-70.4 102.4l0 22.4c0 19.2 12.8 32 32 32 0 0 0 0 0 0 16 0 32-12.8 32-32l0-22.4c0-19.2 12.8-38.4 32-44.8C643.2 528 681.6 451.2 665.6 374.4zM480 729.6c-9.6 9.6-12.8 22.4-12.8 35.2 0 12.8 6.4 25.6 12.8 35.2 9.6 9.6 22.4 12.8 35.2 12.8 12.8 0 25.6-6.4 35.2-12.8 9.6-9.6 12.8-22.4 12.8-35.2 0-12.8-6.4-25.6-12.8-35.2C531.2 710.4 499.2 710.4 480 729.6zM512 67.2c-80 0-160 22.4-227.2 64C246.4 86.4 188.8 64 124.8 64 115.2 64 102.4 70.4 96 80c-6.4 9.6-6.4 22.4 0 32 0 0 32 54.4 41.6 137.6 3.2 16 16 28.8 32 28.8 0 0 3.2 0 3.2 0C192 275.2 204.8 262.4 204.8 243.2 198.4 201.6 188.8 163.2 179.2 137.6 204.8 144 230.4 160 249.6 188.8c0 0 0 0 0 0 0 0 0 0 0 0C252.8 192 252.8 192 252.8 195.2c0 0 3.2 3.2 3.2 3.2 3.2 0 3.2 3.2 6.4 3.2 3.2 0 3.2 3.2 6.4 3.2 3.2 0 3.2 0 6.4 0 3.2 0 3.2 0 6.4 0 3.2 0 3.2 0 6.4-3.2 3.2 0 3.2 0 6.4-3.2 0 0 0 0 0 0 0 0 0 0 0 0 64-44.8 140.8-67.2 217.6-67.2 211.2 0 384 172.8 384 384s-172.8 384-384 384-384-172.8-384-384c0-54.4 9.6-105.6 32-156.8 6.4-16 0-35.2-16-41.6-16-6.4-35.2 0-41.6 16C76.8 390.4 64 451.2 64 515.2c0 246.4 201.6 448 448 448 246.4 0 448-201.6 448-448C960 268.8 758.4 67.2 512 67.2z" p-id="1222" fill="#1296db"></path></svg>
8. eclipse这些module是先`mvn clean verify`再导入
9. 事实上注释完全允许被跳过:`mvn clean verify -DskipTests=true`
10. 在加载完`target definition`之后再加载一次就会导致依赖解析不正常
    - when the target platform gets updated, some dependencies can become stale and may not be refresh correctly.
11. Hyper和cmd的执行结果可能不一样,而且和是否管理员权限没有关系,提了issue还没结果
    - 后来得益于开发者的帮助,知道是因为在cmd或powershell中执行时,参数部分需要加上字符串标志,即`''`,以避免被转义.
##### 1.4.7.2.2. 面对以上事实走的弯路
```mermaid
graph LR
    id1(time out?)--1-->id2[换代理/去掉代理/换wifi]
    subgraph 一系列事故...
    id2[换代理/去掉代理/换wifi]--2-->id3[tests报错]--3-->id4[重试N遍,搜索无结果]--4-->id5[换用客户端给的`npm run build-server`]--5-->id6[尝试用idea测试对应不通过的代码]-.5.1.->id7>依赖一时找不到]
    end
    
    subgraph 崩1...
    id8[尝试用idea导入全部项目]-.6.1.->id9>发现plugin找不到,然后没有dependencies]--7-->id10[自己加dependencies]--8-->id11[一个depedencies找不到]--9-->id12[找到那个depedencies源码,但是没有jar包]
    end

    subgraph 崩2...
    id13[几乎import部分都搞定<br/>但是导入的有的缺field<br/>有的缺method]--11-->id133[注释掉对应tests]==12==>id14{走投无路}
    id14--14.1-->id15[寻找其他lsp的实现]--15-->id17[所以ts可以和java混用]--17-->id19[可能因为两会<br/>重来/下载新的受限于网络]
    id14--14.2-->id16[看issue中有没有类似问题]--16-->id18[所以可以跳过测试]--18-->id19
    end
    subgraph 崩3...
    id20[用vscode的terminal始终无法执行<br/>提示找不到id1 application]--20-->id21[意外地用了Hyper,终于可以允许了!<br/>虽然静态找不到id1 application在哪儿]--21-->id22[debug vscode-java发现会启动root/server/的文件<br/>server文件夹是生成的,由jdt-ls *product/target/repository下的文件组成]--21-->id23[remote-server mode启动的vscode-java<br/>不能看到给jdtls的请求]--22-->id24[remote-server mode开启1045与3333端口<br/>jdtls开启1044端口,issue说是JVM的debugger端口]--23-->id25[socket && serversocker与1044连不上<br/>也很困惑vscode-java那边已经可以自己独立]
    
    end
```
所以还有很多的一些问题无法解决:
- 三个端口(1044,1045,3333)打开后都在listening???
- remote-server加载并运行了自己`~/server/`下的jar,那么还会给jdt-ls发请求再由我debug吗?
- 与1044可以socket连接吗?
- vscode-java应该自成了一个进程,启动后又打开JVM运行服务器进程,那么它们内部是怎样通信的?
- vscode-java的服务器jar是怎么传给它的?
- 另一种使用Java Compiler的language server看似是ts与Java混用,应该是宿主机的JVM编译java进内存后运行吧?

不得不说我还是按照了自己原本的想法做,去学习jdt-ls,学好后可以改一改就可以做雅思作文写作的服务器了.没想到啊!!!我这个基础知识太不过关了.
#### 1.4.7.3. 发现item.ducumentation没有办法显示了
原来是需要点一下尾部才会出现ducumentation的扩展--->不得不说这个交互是会误导用户的<-_<-
#### 1.4.7.4. vsce package之后安装提示"manifest is not found" && 手动安装后也没有作用
1.  将生成的`.vscodemanifest`或者`package.json`直接替换进其他包都可以安装成功...
2. enable插件后发现只多开启了一个进程,通过vscode 启动会开启6个,所以应该是插件没有顺利启动
3. 重新从sample里下了`lsp-sample`,果然安装上了也没有用...难道是我的vscode出问题了吗?官方就如此不可靠?
4. 于是找到可以运行的比如`DevUIHelper-LSP`,让它和`lsp-sample`比对,希望可以让我找到原因,最后应用到`writingCat`身上
5. 比对发现变量太多,于是直接在可以运行的项目里删改,并保证每一步删改后的结果是可以online运行的---不得不说git十分重要,发现不能运行时可以快速撤退,此外,一定要保证编译成功了`tsc -b -w`再运行,不然很可能就是上一次的或者缓存的结果!

最后总结原因应该是依赖的问题,依赖更新了依赖包的架构.但是不知道为什么启动不了了.
### 1.4.8. 其他
#### 1.4.8.1. Java数组的长度最大是2^31
像这样的代码编译是通不过的:
```java
Scanner sc = new Scanner(System.in);
long n = sc.nextLong();
long[] ids = new long[n];
```
报错只会说"   Type mismatch: cannot convert from long to int".事实上,数组的`length`属性是`int`型的,系统因为不允许long型的n转int报错,但是其实这已经大大越界了.
length因为`int`的限制,最大为32位的有符号整数，即最大正值为2<sup>31</sup>,即<sup>21</sup>K,2<sup>11</sup>M,2<sup>1</sup>G.如果将`length`属性置为`long`型,即最大值为2<sup>63</sup>=2<sup>33</sup>G,内存也不可能有这么大的.
#### 1.4.8.2. docker run maven mvn clean install,但是读不了文件
```sh
[ERROR]     Non-readable POM /mnt/code-generate/pom_origin.xml: /mnt/code-generate/pom_origin.xml (No such file or directory)
```
最后没有用镜像版的maven,而是maven就好了....