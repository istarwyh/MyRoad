用户在保险风控领域会沉淀许多数据，通过将风控领域特有的特征用户数据，比如用户职业、常住地、会员等级、用户购买、搜索、交易等商品近x天的统计信息、宠物种类、年龄、投保行为信息等数据应用于商品推荐，“风销一体”成为搜推领域的一个交叉增长点。
在蚂蚁，有很多场景都是垂直的小于万级别的 item 推荐。
这个系统可以分为几个主要模块：

## 外部宠物商城架构模块（顶部框）
宠物商城在最外层呈现为用户端，宠物商城调用宠物后端，宠物后端从营销、搜索、风控推荐三个渠道获取宠物商品信息
这些信息会进行整合和标准化处理
## 特征构建模块（左侧框）
离线特征包含三类基础特征：user特征、item特征和user2item特征
实时特征包含用户实时浏览商品数据和购买商品数据

离线和实时特征会进行融合
## 风控推荐核心模块（中间框）
1. 风控推荐根据用户档案信息丰富召回请求
2. 召回对应商品
3. 构建离线和实时特征
4. 将特征和商品给予算法打分
5. 打分后对商品进行排序、过滤
6. 商品分页返回推荐结果
7. 稳定模型兜底
## 缓存预热模块（右上框）
缓存预热机制包含三个方面：
- 定时任务
- 任务发布与订阅
- 分布式任务队列
## 商品过滤模块（右中框）
对商品进行多维度过滤：
疲劳度过滤
互斥过滤（与互斥队列相关）
商品状态过滤
## 效果优化模块(底部框)
达尔文实验
## 测试、监控与日志模块
- 单元测试
- 日志模型，与无盘化日志和日志清洗有关

各个大模块的关系是，宠物后端调用风控推荐，风控推荐调用特征构建与商品过滤模块，最后风控推荐走到效果优化模块，缓存预热在后台工作，测试、监控与日志模块被风控推荐、商品过滤、特征构建和缓存预热模块调用