<html>
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.font.im/css?family=Open+Sans" rel="stylesheet" type="text/css">
        <title>TrieTree</title>
    </head>
    <body>

    </body>
    <script>    
    class Node{
        constructor(value){
            this.val = value;//数值
            this.child = [];//孩子结点
            this.end = false;//是否是独立的单词
            this.height = 0;//深度
            this.num = 1;//经过单词数量
        }
        search(key){
            for(let i = 0;i< this.child.length; ++i){
                if(this.child[i].val == key){
                    return this.child[i];
                }
            }
        }
    }
    class TrieTree{
        constructor(){
            this.root = new Node(null);
            this.size = 1;
        }
        insert(value){
            let node = this.root;
            for( let ch of value){
                let son = node.search(ch);
                if(son == null){
                    son = new Node(ch);//构建
                    son.height = node.height + 1;
                    node.child.push(son);
                }else{
                    son.num++;
                }
                node = son;//向下递归
            }
            if(!node.end){//不是结束标志,则增加结束标志
                this.size++;
                node.end = true;
            }   
        }
        // 自动补全
       relate(value){
        let node = this.root;
        let arr = [];
        let word = "";
        $("#relate").html("");
        for(let ch of value){
            let son = node.search(ch);
            if(son == null){
                return arr;
            }
            node = son;
        }
        console.log("存在"+value+"公共前缀")
        this.DFS(arr,value,node);
        console.log(arr)
        for( let w of arr){
            $("relate").append("<p>"+w+"</p>");
        }
       }
       DFS(arr,value,node){
           if( node != null){
               for(var i=0;i<node.child.length;++i){
                   if(node.child[i].end){
                       arr.push(value+node.child[i].val)
                   }
                   this.DFS(arr,value+node.child.val,node.child[i])
               }
           }
       }
    }
    </script>
</html>
    